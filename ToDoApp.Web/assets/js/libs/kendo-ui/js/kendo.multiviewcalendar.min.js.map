{"version":3,"file":"kendo.multiviewcalendar.min.js","sources":["kendo.multiviewcalendar.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.multiviewcalendar',[ \"kendo.core\", \"kendo.selectable\", \"kendo.calendar\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"multiviewcalendar\",\n    name: \"MultiViewCalendar\",\n    category: \"web\",\n    description: \"Multi-view calendar.\",\n    depends: [ \"core\", \"selectable\", \"calendar\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        calendar = kendo.calendar,\n        support = kendo.support,\n        isInRange = calendar.isInRange,\n        toDateObject = calendar.toDateObject,\n        createDate = calendar.createDate,\n        isEqualDate = calendar.isEqualDate,\n        getToday = calendar.getToday,\n        keys = kendo.keys,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        Selectable = ui.Selectable,\n        template = kendo.template,\n        mobileOS = support.mobileOS,\n        ns = \".kendoMultiViewCalendar\",\n        CLICK = \"click\",\n        KEYDOWN = \"keydown\",\n        ID = \"id\",\n        MIN = \"min\",\n        MONTH = \"month\",\n        DOT = \".\",\n        EMPTY = \" \",\n        CENTURY = \"century\",\n        DECADE = \"decade\",\n        CHANGE = \"change\",\n        NAVIGATE = \"navigate\",\n        VALUE = \"value\",\n        FOCUSED = \"k-focus\",\n        SELECTED = \"k-selected\",\n        MID = \"k-range-mid\",\n        SPLITEND = \"k-range-split-end\",\n        SPLITSTART = \"k-range-split-start\",\n        START = \"k-range-start\",\n        END = \"k-range-end\",\n        HOVER = \"k-hover\",\n        DISABLED = \"k-disabled\",\n        TODAY = \"k-nav-today\",\n        OTHERMONTH = \"k-other-month\",\n        OUTOFRANGE = \"k-out-of-range\",\n        CALENDAR_VIEW = \"k-calendar-view\",\n        CELLSELECTOR = \"td:has(.k-link):not(.\" + OUTOFRANGE + \")\",\n        CELLSELECTORVALID = \"td:has(.k-link):not(.\" + DISABLED + \"):not(.\" + OUTOFRANGE + \")\",\n        BLUR = \"blur\",\n        FOCUS = \"focus\",\n        MOUSEENTER = support.touch ? \"touchstart\" : \"mouseenter\",\n        MOUSELEAVE_NS = support.touch ? \"touchend\" + ns + \" touchmove\" + ns : \"mouseleave\" + ns,\n        PREVARROW = \"_prevArrow\",\n        NEXTARROW = \"_nextArrow\",\n        RANGE = \"range\",\n        SINGLE = \"single\",\n        MULTIPLE = \"multiple\",\n        TABINDEX = \"tabindex\",\n        TABLE = \"table\",\n        TBODY = \"tbody\",\n        THEAD = \"thead\",\n        TR = \"tr\",\n        TD = \"td\",\n        TH = \"th\",\n        ROLE = \"role\",\n        NONE = \"none\",\n        ROWGROUP = \"rowgroup\",\n        COLUMNHEADER = \"columnheader\",\n        ROWHEADER = \"rowheader\",\n        GRIDCELL = \"gridcell\",\n        ARIA_SELECTED = \"aria-selected\",\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_LABEL = \"aria-label\",\n        ARIA_OWNS = \"aria-owns\",\n        ARIA_ACTIVEDESCENDANT = \"aria-activedescendant\",\n        INPUTSELECTOR = \"input,a,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up\",\n        DATE = Date,\n        views = {\n            month: 0,\n            year: 1,\n            decade: 2,\n            century: 3\n        };\n\n    var RangeSelectable = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.calendar = options.calendar;\n\n            that.userEvents = new kendo.UserEvents(that.element, {\n                global: true,\n                allowSelection: true,\n                filter: that.options.filter,\n                tap: that._tap.bind(that),\n                touchAction: NONE\n            });\n        },\n\n        events: [CHANGE],\n\n        options: {\n            name: \"RangeSelectable\",\n            filter: \">*\",\n            inputSelectors: INPUTSELECTOR,\n            multiple: false,\n            dragToSelect: true,\n            relatedTarget: $.noop\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.userEvents.destroy();\n            that.calendar = null;\n\n            that._lastActive = that.element = that.userEvents = that._start = that._end = null;\n        },\n\n        _allowSelection: function(target) {\n            if ($(target).is(this.options.inputSelectors)) {\n                this.userEvents.cancel();\n                return false;\n            }\n\n            return true;\n        },\n\n        start: function(element) {\n            if (element === undefined) {\n                return this._start;\n            }\n            element.addClass(START + \" \" + SELECTED).attr(ARIA_SELECTED, true);\n            this._start = element;\n        },\n\n        end: function(element) {\n            if (element === undefined) {\n                return this._start;\n            }\n            element.addClass(END + \" \" + SELECTED).attr(ARIA_SELECTED, true);\n            this._end = element;\n        },\n\n        mid: function(elements) {\n            var tables = this.element.find(\"table.k-month\");\n\n            elements.addClass(MID).attr(ARIA_SELECTED, true);\n            tables.each(function() {\n                var that = $(this);\n                var lastCell = that.find(CELLSELECTORVALID).last();\n                var firstCell = that.find(CELLSELECTORVALID).first();\n\n                if (lastCell.hasClass(MID)) {\n                    lastCell.addClass(SPLITEND);\n                }\n\n                if (firstCell.hasClass(MID)) {\n                    firstCell.addClass(SPLITSTART);\n                }\n            });\n        },\n\n        clear: function(clearVariables) {\n            this.element.find(CELLSELECTOR)\n                .removeClass(END + \" \" + SELECTED + \" \" + START + \" \" + MID + \" \" + SPLITEND + \" \" + SPLITSTART)\n                .removeAttr(ARIA_SELECTED);\n\n            if (clearVariables) {\n                this._start = this._end = null;\n            }\n        },\n\n        selectFrom: function(start) {\n            var that = this;\n            var items;\n            var startIdx;\n\n            items = that.element.find(CELLSELECTOR);\n\n            startIdx = $.inArray($(start)[0], items);\n\n            that.clear();\n            that.start(start);\n\n            items = items.filter(function(index) {\n                return index > startIdx;\n            });\n            that.mid(items);\n        },\n\n        selectTo: function(end) {\n            var that = this;\n            var items;\n            var endIdx;\n\n            items = that.element.find(CELLSELECTOR);\n\n            endIdx = $.inArray($(end)[0], items);\n\n            that.clear();\n\n            items = items.filter(function(index) {\n                return index < endIdx;\n            });\n            that.mid(items);\n            that.end($(end));\n        },\n\n        range: function(start, end) {\n            var that = this;\n            var items;\n            var startIdx;\n            var endIdx;\n            var temp;\n\n            if (start === undefined) {\n                return { start: that._start, end: that._end };\n            }\n\n            items = that.element.find(CELLSELECTOR);\n\n            startIdx = $.inArray($(start)[0], items);\n            endIdx = $.inArray($(end)[0], items);\n\n            if (endIdx == -1) {\n                endIdx = items.length;\n            }\n\n            if (startIdx > endIdx) {\n                temp = end;\n                end = start;\n                start = temp;\n                temp = startIdx;\n                startIdx = endIdx;\n                endIdx = temp;\n            }\n            that.clear();\n            start.addClass(START + \" \" + SELECTED).attr(ARIA_SELECTED, true);\n            that._start = start;\n\n            items = items.filter(function(index) {\n                return index > startIdx && index < endIdx;\n            });\n            that.mid(items);\n\n            if (end) {\n                that.end($(end));\n            } else {\n                that._useEnd = true;\n            }\n        },\n\n        change: function() {\n            this.trigger(CHANGE);\n        },\n\n        _clearFlags: function() {\n            this._useStart = this._useEnd = false;\n        },\n\n        _tap: function(e) {\n            var target = $(e.target),\n                range = this.calendar.selectRange() || {},\n                start = range.start,\n                end = range.end,\n                that = this,\n                currentDate = toDateObject($(target).find(\"a\")),\n                items,\n                startIdx,\n                endIdx;\n\n\n            that._lastActive = target;\n\n            if (!start || +start > +currentDate) {\n                that.clear(true);\n                that.start(target);\n                that._clearFlags();\n                that.trigger(CHANGE);\n                return;\n            }\n\n            if (start && !end) {\n                items = that.element.find(CELLSELECTOR);\n\n                startIdx = $.inArray($(that._start)[0], items);\n                endIdx = $.inArray($(target)[0], items);\n\n                if (start) {\n                    that._useStart = true;\n                }\n\n                items = items.filter(function(index) {\n                    return index > startIdx && index < endIdx;\n                });\n                that.mid(items);\n                that.end($(target));\n                that.trigger(CHANGE);\n                that._clearFlags();\n                return;\n            }\n\n            if (start && end) {\n                if (target.hasClass(MID)) {\n                    if (!that._toggling) {\n                        that.range(target, that._end);\n                    } else {\n                        that.range(that._start, target);\n                    }\n                    that._toggling = !that._toggling;\n                    that.trigger(CHANGE);\n                    that._clearFlags();\n                    return;\n                }\n                that._toggling = false;\n                that._end = null;\n                that.clear();\n                that.start(target);\n                that.trigger(CHANGE);\n                that._clearFlags();\n            }\n        }\n    });\n\n\n    var MultiViewCalendar = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            var id;\n            var culture;\n\n            Widget.fn.init.call(that, element, options);\n\n            element = that.wrapper = that.element;\n            options = that.options;\n\n            that.options.disableDates = calendar.disabled(that.options.disableDates);\n\n            culture = kendo.getCulture(options.culture);\n            options.format = kendo._extractFormat(options.format || culture.calendars.standard.patterns.d);\n\n            that._templates();\n\n            that._header();\n\n            that._wrapper();\n\n            id = element\n                .addClass(\"k-widget k-calendar k-calendar-range\" + (options.weekNumber ? \" k-week-number\" : \"\"))\n                .on(KEYDOWN + ns, DOT + CALENDAR_VIEW, that._move.bind(that))\n                .on(FOCUS + ns, DOT + CALENDAR_VIEW, that._focus.bind(that))\n                .on(BLUR + ns, DOT + CALENDAR_VIEW, that._blur.bind(that))\n                .on(CLICK + ns, CELLSELECTORVALID, function(e) {\n                    var link = e.currentTarget.firstChild;\n\n                    if (link.href.indexOf(\"#\") != -1) {\n                        e.preventDefault();\n                    }\n\n                    that._click($(link));\n                })\n                .on(MOUSEENTER + ns, CELLSELECTORVALID, that._mouseEnter.bind(that))\n                .on(MOUSELEAVE_NS, CELLSELECTORVALID, function() {\n                    $(this).removeClass(HOVER);\n                })\n                .attr(ID);\n\n            if (!id) {\n                id = kendo.guid();\n            }\n\n            that._cellID = id + \"_cell_selected\";\n\n            that._calendarWidth = that.element.width();\n\n            that._range = options.range;\n\n            that._initViews({ viewName: options.start, value: options.value });\n            that._selectable();\n\n            that._footer(that.footer);\n            that._selectDates = [];\n            that.value(options.value);\n\n            if (options.selectable == MULTIPLE) {\n                that._selectDates = options.selectDates.length ? options.selectDates : that._selectDates;\n                that._restoreSelection();\n            }\n\n            if (options.selectable == RANGE) {\n                that.selectRange(that._range);\n            }\n\n            kendo.notify(that);\n        },\n\n        options: {\n            name: \"MultiViewCalendar\",\n            value: null,\n            min: new DATE(1900, 0, 1),\n            max: new DATE(2099, 11, 31),\n            dates: [],\n            disableDates: null,\n            culture: \"\",\n            footer: \"\",\n            format: \"\",\n            month: {},\n            range: { start: null, end: null },\n            weekNumber: false,\n            views: 2,\n            showViewHeader: false,\n            selectable: SINGLE,\n            selectDates: [],\n            start: MONTH,\n            depth: MONTH,\n            messages: {\n                weekColumnHeader: \"\"\n            }\n        },\n\n        events: [\n            CHANGE,\n            NAVIGATE\n        ],\n\n        setOptions: function(options) {\n            var that = this;\n\n            calendar.normalize(options);\n\n            options.disableDates = calendar.disabled(options.disableDates);\n\n            Widget.fn.setOptions.call(that, options);\n\n            that._selectable();\n\n            that._templates();\n\n            that._footer(that.footer);\n\n            for (var i = 0; i < that._views.length; i++) {\n                that._views[i].off(ns).remove();\n            }\n\n            that._initViews({ viewName: options.start, value: options.value });\n\n            that._range = options.range || { start: null, end: null };\n\n            that._restoreSelection();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that._cell = null;\n            that._currentView = null;\n            that._current = null;\n\n            if (that._views) {\n                for (var i = 0; i < that._views.length; i++) {\n                    that._views[i].off(ns).remove();\n                }\n            }\n\n            that.element.off(ns);\n\n            if (that.header) {\n                that.header.off(ns);\n                that._title = null;\n                that.header = null;\n            }\n\n            if (that.selectable) {\n                that.selectable.destroy();\n                that.selectable = null;\n            }\n\n            if (that.rangeSelectable) {\n                that.rangeSelectable.destroy();\n                that.rangeSelectable = null;\n            }\n\n            if (that._today) {\n                kendo.destroy(that._today.off(ns));\n            }\n\n            that._views = null;\n\n            Widget.fn.destroy.call(that);\n        },\n\n        current: function() {\n            return this._current;\n        },\n\n        focus: function() {\n            this.tablesWrapper.trigger(\"focus\");\n        },\n\n        min: function(value) {\n            return this._option(MIN, value);\n        },\n\n        max: function(value) {\n            return this._option(\"max\", value);\n        },\n\n        view: function() {\n            return this._currentView;\n        },\n\n        navigateToPast: function() {\n            this._navigate(PREVARROW, -1);\n        },\n\n        navigateToFuture: function() {\n            this._navigate(NEXTARROW, 1);\n        },\n\n        navigateUp: function() {\n            var that = this,\n            index = that._index;\n\n            if (that._title.hasClass(DISABLED)) {\n                return;\n            }\n\n            that.navigate(that._current, ++index);\n        },\n\n        navigateDown: function(value) {\n            var that = this,\n            index = that._index,\n            depth = that.options.depth;\n\n            if (!value) {\n                return;\n            }\n\n            if (index === views[depth]) {\n                if (!isEqualDate(that._value, that._current) || !isEqualDate(that._value, value)) {\n                    that.value(value);\n                    that.trigger(CHANGE);\n                }\n                return;\n            }\n\n            that.navigate(value, --index);\n        },\n\n        navigate: function(value, view) {\n            view = isNaN(view) ? calendar.views[calendar.viewsEnum[view]] : calendar.views[view];\n\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var max = options.max;\n\n            if (!value) {\n                that._current = value = new DATE(+calendar.restrictValue(value, min, max));\n            } else {\n                that._current = value;\n            }\n\n            if (view === undefined) {\n                view = that._currentView;\n            }\n\n            that._currentView = view;\n\n            for (var i = 0; i < that._views.length; i++) {\n                that._views[i].off(ns).remove();\n            }\n\n            that._initViews({ viewName: view.name, value: value });\n\n            that._restoreSelection();\n        },\n\n        _aria: function() {\n            var tables = this.tablesWrapper.find(TABLE),\n                rowGroups = tables.first().find(THEAD).add(tables.find(TBODY)),\n                viewName = this._currentView.name;\n\n            tables.removeAttr(TABINDEX);\n\n            tables.attr({\n                role: NONE\n            });\n\n            rowGroups.attr({\n                role: ROWGROUP\n            });\n\n            if (viewName === MONTH) {\n                this._ariaMonth();\n            }\n        },\n\n        _ariaMonth: function() {\n            var tables = this.tablesWrapper.find(TABLE),\n                rowGroups = tables.first().find(THEAD).add(tables.find(TBODY)),\n                rows = rowGroups.find(TR),\n                noHeaderRows = tables.not(\":eq(0)\").find(THEAD + EMPTY + TR),\n                noHeaderCells = noHeaderRows.find(TH),\n                columnHeaderCells = tables.first().find(THEAD + EMPTY + TH),\n                rowHeaderCells = tables.find(TBODY + EMPTY + TH),\n                outOfRange = tables.find(DOT + OUTOFRANGE),\n                ariaDataCells = function(i, row) {\n                    var $row = $(row),\n                        numberOfEmpty = $row.find(DOT + OUTOFRANGE).length,\n                        owned = [],\n                        prev, cells;\n\n                    if (i === 1) {\n                        $row.children()\n                            .filter(DOT + OUTOFRANGE)\n                            .attr({\n                                \"aria-hidden\": \"false\",\n                                role: GRIDCELL\n                            });\n                    } else if (numberOfEmpty === 7) {\n                        $row.removeAttr(ROLE);\n                        $row.find(TH).removeAttr(ROLE);\n                    } else if (numberOfEmpty > 0 && numberOfEmpty < 7 && $row.children().not(TH).first().hasClass(OUTOFRANGE)) {\n                        $row.find(TH).removeAttr(ROLE);\n                        prev = rows.eq(i - 1);\n\n                        if (!prev.attr(ROLE) || prev.attr(ROLE) === NONE) {\n                            prev = rows.eq(i - 2);\n                        }\n\n                        cells = $row.children().not(TH);\n\n                        cells.each(function(j, cell) {\n                            var $cell = $(cell),\n                                id;\n\n                            if (!$cell.hasClass(OUTOFRANGE)) {\n                                id = \"owned_\" + i + \"_\" + j;\n                                $cell.attr(ID, id);\n                                owned.push(id);\n                            }\n                        });\n\n                        $row.removeAttr(ROLE);\n                        prev.attr(ARIA_OWNS, owned.join(\" \"));\n                    }\n                };\n\n            columnHeaderCells.attr({\n                role: COLUMNHEADER\n            });\n\n            rowHeaderCells.attr({\n                role: ROWHEADER\n            });\n\n            outOfRange.removeAttr(ROLE);\n            noHeaderRows.removeAttr(ROLE);\n            noHeaderCells.removeAttr(ARIA_LABEL).removeAttr(ROLE);\n\n            rows.each(ariaDataCells);\n        },\n\n        _updateHeader: function() {\n            var that = this;\n            var view = that._currentView;\n            var title = that._title;\n            var value = that._firstViewValue;\n            var options = that.options;\n            var visibleRange = that._visibleRange();\n            var culture = options.culture;\n            var min = options.min;\n            var max = options.max;\n            var lastDate;\n            var disabled;\n            var prevDisabled;\n            var nextDisabled;\n\n            if (view.name === DECADE || view.name === CENTURY) {\n                lastDate = shiftDate(value, view.name, options.views - 1);\n                if (!isInRange(lastDate, min, max)) {\n                    lastDate = max;\n                }\n\n                title.html(view.first(value).getFullYear() + \" - \" + view.last(lastDate).getFullYear());\n            } else {\n                title.html(view.title(value, min, max, culture) + \" - \" + view.title(shiftDate(value, view.name, options.views - 1), min, max, culture));\n            }\n\n            disabled = view.name === CENTURY;\n            title.toggleClass(DISABLED, disabled).attr(ARIA_DISABLED, disabled);\n\n            prevDisabled = view.compare(visibleRange.start, that.options.min) < 1;\n            nextDisabled = view.compare(visibleRange.end, that.options.max) > -1;\n\n            if (prevDisabled && nextDisabled) {\n                if (that._navContainer) {\n                    that._navContainer.remove();\n                    that._navContainer = null;\n                }\n            } else {\n                if (!that._navContainer) {\n                    that._navContainer = $('<span class=\"k-calendar-nav k-hstack\">' +\n                    '<a tabindex=\"-1\" href=\"#\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-prev-view\" ' + ARIA_LABEL + '=\"Previous\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></a>' +\n                    '<a tabindex=\"-1\" href=\"#\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-next-view\" ' + ARIA_LABEL + '=\"Next\"><span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span></a>' +\n                    '</span>').appendTo(that.header);\n                    that[PREVARROW] = that._navContainer.find(\".k-prev-view\");\n                    that[NEXTARROW] = that._navContainer.find(\".k-next-view\");\n                }\n\n                that[PREVARROW].toggleClass(DISABLED, prevDisabled).attr(ARIA_DISABLED, prevDisabled);\n                if (that[PREVARROW].hasClass(DISABLED)) {\n                    that[PREVARROW].removeClass(HOVER);\n                }\n\n                that[NEXTARROW].toggleClass(DISABLED, nextDisabled).attr(ARIA_DISABLED, nextDisabled);\n                if (that[NEXTARROW].hasClass(DISABLED)) {\n                    that[NEXTARROW].removeClass(HOVER);\n                }\n            }\n        },\n\n        _mouseEnter: function(e) {\n            var that = this;\n            var cell = $(e.currentTarget);\n            var range;\n            var items;\n            var startIdx;\n            var endIdx;\n\n            cell.addClass(HOVER);\n\n            if (that.rangeSelectable && that._currentView.name === MONTH) {\n                range = that.selectRange();\n                if (range.start && !range.end) {\n                    if (that._dateInViews(that.selectRange().start)) {\n                        items = that.element.find(that.rangeSelectable.options.filter);\n                        startIdx = $.inArray($(that.rangeSelectable._start)[0], items);\n                        endIdx = $.inArray($(cell)[0], items);\n                        if (startIdx > endIdx) {\n                            return;\n                        }\n                        that.rangeSelectable.range(that.rangeSelectable._start, cell);\n                    } else if (+toDateObject(that.element.find(CELLSELECTOR).first().find(\"a\")) > +range.start) {\n                        that.rangeSelectable.selectTo(cell);\n                    }\n                    that.rangeSelectable._end = null;\n                }\n            }\n        },\n\n        _move: function(e) {\n            var that = this;\n            var options = that.options;\n            var key = e.keyCode;\n            var index = that._index;\n            var min = options.min;\n            var max = options.max;\n            var focusedCell = that.element.find(DOT + FOCUSED);\n            var table = focusedCell.closest(TABLE);\n            var currentValue = new DATE(+(that._current || toDateObject(focusedCell.find(\"a\"))));\n            var isRtl = kendo.support.isRtl(that.wrapper);\n            var navigate = false;\n            var value, prevent, method, cell, lastActive, cellIndex;\n\n            if (key == keys.RIGHT && !isRtl || key == keys.LEFT && isRtl) {\n                value = 1;\n                prevent = true;\n            } else if (key == keys.LEFT && !isRtl || key == keys.RIGHT && isRtl) {\n                value = -1;\n                prevent = true;\n            } else if (key == keys.UP) {\n                value = index === 0 ? -7 : -4;\n                prevent = true;\n            } else if (key == keys.DOWN) {\n                value = index === 0 ? 7 : 4;\n                prevent = true;\n            } else if (key == keys.SPACEBAR) {\n                value = 0;\n                prevent = true;\n            } else if (key == keys.HOME) {\n                prevent = true;\n                cell = table.find(CELLSELECTORVALID).eq(0);\n                if (cell.hasClass(FOCUSED)) {\n                    table = table.prev();\n                    if (table.length) {\n                        that._focusCell(table.find(CELLSELECTORVALID).eq(0));\n                    } else {\n                        navigate = that[PREVARROW] && !that[PREVARROW].hasClass(DISABLED);\n                        that._navigate(PREVARROW, -1);\n                        that._focusCell(that.element.find(TABLE).first().find(CELLSELECTORVALID).first());\n                    }\n                } else {\n                    that._focusCell(cell);\n                }\n            } else if (key == keys.END) {\n                prevent = true;\n                cell = table.find(CELLSELECTORVALID).last();\n                if (cell.hasClass(FOCUSED)) {\n                    table = table.next();\n                    if (table.length) {\n                        that._focusCell(table.find(CELLSELECTORVALID).last());\n                    } else {\n                        navigate = that[NEXTARROW] && !that[NEXTARROW].hasClass(DISABLED);\n                        that._navigate(NEXTARROW, 1);\n                        that._focusCell(that.element.find(TABLE).last().find(CELLSELECTORVALID).last());\n                    }\n                } else {\n                    that._focusCell(cell);\n                }\n            } else if (key === 84) {\n                that._todayClick(e);\n                prevent = true;\n            }\n\n            if (e.ctrlKey || e.metaKey) {\n                if (key == keys.RIGHT && !isRtl || key == keys.LEFT && isRtl) {\n                    navigate = that[NEXTARROW] && !that[NEXTARROW].hasClass(DISABLED);\n                    that._navigate(NEXTARROW, 1);\n                    prevent = true;\n                } else if (key == keys.LEFT && !isRtl || key == keys.RIGHT && isRtl) {\n                    navigate = that[PREVARROW] && !that[PREVARROW].hasClass(DISABLED);\n                    that._navigate(PREVARROW, -1);\n                    prevent = true;\n                } else if (key == keys.UP) {\n                    navigate = !that._title.hasClass(DISABLED);\n                    that.navigateUp();\n                    that._focusCell(that._cellByDate(that._current));\n                    prevent = true;\n                } else if (key == keys.DOWN) {\n                    if (that._currentView.name === MONTH) {\n                        that.value(currentValue);\n                    } else {\n                        that.navigateDown(currentValue);\n                        that._focusCell(that._cellByDate(that._current));\n                        navigate = true;\n                    }\n                    prevent = true;\n                } else if ((key == keys.ENTER || key == keys.SPACEBAR)) {\n                    if (options.selectable === MULTIPLE) {\n                        that._toggleSelection(e);\n                    }\n                }\n            } else if (e.shiftKey && options.selectable !== SINGLE) {\n                if (value !== undefined || method) {\n                    if (!method) {\n                        that._currentView.setDate(currentValue, value);\n                    }\n\n                    if (that._currentView.name !== MONTH) {\n                        return;\n                    }\n\n                    if (options.disableDates(currentValue)) {\n                        currentValue = that._nextNavigatable(currentValue, value);\n                    }\n\n                    min = createDate(min.getFullYear(), min.getMonth(), min.getDate());\n\n                    if (isInRange(currentValue, min, max)) {\n                        if (!that._dateInViews(currentValue)) {\n                            if (value > 0) {\n                                navigate = that[NEXTARROW] && !that[NEXTARROW].hasClass(DISABLED);\n                                that._navigate(NEXTARROW, 1);\n                            } else {\n                                navigate = that[PREVARROW] && !that[PREVARROW].hasClass(DISABLED);\n                                that._navigate(PREVARROW, -1);\n                            }\n                        }\n                        cell = that._cellByDate(currentValue);\n                        that._current = currentValue;\n\n                        if (that.selectable) {\n                            that._selectRange(toDateObject((that.selectable._lastActive || focusedCell).find(\"a\")), currentValue);\n                            if (!that.selectable._lastActive) {\n                                that.selectable._lastActive = focusedCell;\n                            }\n                            that.trigger(CHANGE);\n                            that._focusCell(cell);\n                        }\n\n                        if (that.rangeSelectable) {\n                            lastActive = toDateObject((that.rangeSelectable._lastActive || focusedCell).find(\"a\"));\n                            if (!that._dateInViews(lastActive)) {\n                                if (+lastActive > +currentValue) {\n                                    that.rangeSelectable._end = that.rangeSelectable._lastActive;\n                                    that.rangeSelectable.selectFrom(cell);\n                                } else {\n                                    that.rangeSelectable.selectTo(cell);\n                                }\n                            } else {\n                                if (that.rangeSelectable._end && that.rangeSelectable._end.is(DOT + FOCUSED)) {\n                                    that.rangeSelectable._lastActive = that.rangeSelectable._start;\n                                } else {\n                                    that.rangeSelectable._lastActive = that._cellByDate(lastActive);\n                                }\n                                that.rangeSelectable.range(that.rangeSelectable._lastActive, cell);\n                            }\n                            that.rangeSelectable.change();\n                            that._focusCell(cell);\n                        }\n                    }\n                }\n            } else {\n                if (key == keys.ENTER || key == keys.SPACEBAR) {\n                    if (that._currentView.name === MONTH) {\n                        if (that.selectable) {\n                            that.selectable._lastActive = that._cellByDate(currentValue);\n                        }\n                        that.value(currentValue);\n                        if (that.rangeSelectable) {\n                            that.rangeSelectable.change();\n                        }\n                    } else {\n                        that._click($(that._cell[0].firstChild));\n                    }\n                    prevent = true;\n                } else if (key == keys.PAGEUP || key == keys.PAGEDOWN) {\n                    prevent = true;\n                    cellIndex = table.find(CELLSELECTORVALID).index(focusedCell);\n                    table = key == keys.PAGEUP ? table.prev() : table.next();\n                    if (!table.length) {\n                        if (key == keys.PAGEUP) {\n                            navigate = that[PREVARROW] && !that[PREVARROW].hasClass(DISABLED);\n                            that.navigateToPast();\n                            table = that.element.find(TABLE).first();\n                        } else {\n                            navigate = that[NEXTARROW] && !that[NEXTARROW].hasClass(DISABLED);\n                            that.navigateToFuture();\n                            table = that.element.find(TABLE).last();\n                        }\n                    }\n                    cell = table.find(CELLSELECTORVALID).eq(cellIndex);\n                    if (cell.length) {\n                        that._focusCell(cell);\n                    } else {\n                        that._focusCell(table.find(CELLSELECTORVALID).last());\n                    }\n                }\n\n                if (value || method) {\n                    if (!method) {\n                        that._currentView.setDate(currentValue, value);\n                    }\n\n                    min = createDate(min.getFullYear(), min.getMonth(), min.getDate());\n\n                    if (isInRange(currentValue, min, max)) {\n                        if (that.selectable && options.disableDates(currentValue)) {\n                            currentValue = that._nextNavigatable(currentValue, value);\n                        }\n                        if (!that._dateInViews(currentValue)) {\n                            if (value > 0) {\n                                navigate = that[NEXTARROW] && !that[NEXTARROW].hasClass(DISABLED);\n                                that._navigate(NEXTARROW, 1);\n                            } else {\n                                navigate = that[PREVARROW] && !that[PREVARROW].hasClass(DISABLED);\n                                that._navigate(NEXTARROW, -1);\n                            }\n                        }\n                        cell = that._cellByDate(currentValue);\n                        that._current = currentValue;\n                        that._focusCell(cell);\n                    }\n                }\n            }\n\n            if (navigate) {\n                that.trigger(NAVIGATE);\n            }\n\n            if (prevent) {\n                e.preventDefault();\n            }\n\n            return that._current;\n\n        },\n\n        _visualizeSelectedDatesInView: function() {\n            var that = this;\n            var selectedDates = {};\n            var cells;\n\n            $.each(that._selectDates, function(index, value) {\n                selectedDates[kendo.calendar.views[0].toDateString(value)] = value;\n            });\n            that.selectable.clear();\n            cells = that.element.find(TABLE)\n                .find(CELLSELECTOR)\n                .filter(function(index, element) {\n                    return selectedDates[$(element.firstChild).attr(kendo.attr(VALUE))];\n                });\n\n            if (cells.length > 0) {\n                that.selectable._selectElement(cells, true);\n            }\n        },\n\n        _nextNavigatable: function(currentValue, value) {\n            var that = this;\n            var disabled = true;\n            var view = that._currentView;\n            var min = that.options.min;\n            var max = that.options.max;\n            var isDisabled = that.options.disableDates;\n            var navigatableDate = new Date(currentValue.getTime());\n\n            view.setDate(navigatableDate, -value);\n            while (disabled) {\n                view.setDate(currentValue, value);\n                 if (!isInRange(currentValue, min, max)) {\n                    currentValue = navigatableDate;\n                    break;\n                }\n                disabled = isDisabled(currentValue);\n            }\n            return currentValue;\n        },\n\n        _toggleSelection: function(event) {\n            var that = this;\n\n            that.selectable._lastActive = $(that._cell[0]);\n\n            if ($(that._cell[0]).hasClass(SELECTED)) {\n                that.selectable._unselect($(that._cell[0]));\n                that.selectable.trigger(CHANGE, { event: event });\n            }\n            else {\n                that.selectable.value($(that._cell[0]), { event: event });\n            }\n        },\n\n        _option: function(option, value) {\n            var that = this;\n            var options = that.options;\n            var currentValue = that._value || that._current;\n            var isBigger;\n\n            if (value === undefined) {\n                return options[option];\n            }\n\n            value = kendo.parseDate(value, options.format, options.culture);\n\n            if (!value) {\n                return;\n            }\n\n            options[option] = new DATE(+value);\n\n            if (option === MIN) {\n                isBigger = value > currentValue;\n            } else {\n                isBigger = currentValue > value;\n            }\n\n            if (isBigger) {\n                that._value = null;\n            }\n\n            that.navigate(that._value);\n\n            that._toggle();\n        },\n\n        _cellByDate: function(value) {\n            if (value instanceof Date) {\n                value = this._currentView.toDateString(value);\n            }\n            return this.element.find(TABLE).find(\"td:not(.\" + OTHERMONTH + \")\")\n            .filter(function() {\n                return $(this.firstChild).attr(kendo.attr(VALUE)) === value;\n            });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var selectable = that.options.selectable;\n\n            if (that.selectable) {\n                that.selectable.destroy();\n                that.selectable = null;\n            }\n\n            if (that.rangeSelectable) {\n                that.rangeSelectable.destroy();\n                that.rangeSelectable = null;\n            }\n\n            if (selectable.toLowerCase() === RANGE) {\n                that.rangeSelectable = new RangeSelectable(that.wrapper, {\n                    calendar: that,\n                    filter: \"table.k-month \" + CELLSELECTORVALID,\n                    change: that._rangeSelection.bind(that)\n                });\n            } else {\n                that.selectable = new Selectable(that.wrapper, {\n                    aria: true,\n                    dragToSelect: false,\n                    inputSelectors: \"input,textarea,.k-multiselect-wrap,select,button,.k-button>span,.k-button>img,span.k-icon.k-i-arrow-60-down,span.k-icon.k-i-arrow-60-up\",\n                    multiple: Selectable.parseOptions(selectable).multiple,\n                    filter: \"table.k-content \" + CELLSELECTORVALID,\n                    change: that._selection.bind(that),\n                    relatedTarget: that._onRelatedTarget.bind(that),\n                    unselect: that._unselecting.bind(that)\n                });\n            }\n        },\n\n        _onRelatedTarget: function(target) {\n            var that = this;\n\n            if (that.selectable.options.multiple && target.is(CELLSELECTORVALID) && target.length > 1) {\n                that._focusCell(target.first(), true);\n            }\n        },\n\n        _getFirstViewDate: function(currentView) {\n            var that = this;\n            var options = that.options;\n            var ranges = [];\n            var start;\n            var end;\n            var current = new Date(+that._current);\n            var i;\n\n            for (i = 0; i < options.views; i++) {\n                start = currentView.first(current);\n                end = currentView.last(current);\n\n                if (+end > +options.max) {\n                    if (+start <= +options.max) {\n                        ranges.push({ start: start, end: new Date(+options.max) });\n                    }\n                    break;\n                }\n\n                ranges.push({ start: start, end: end });\n\n                current = new Date(+shiftDate(end, currentView.name, 1));\n            }\n\n            current = new Date(+that._current);\n\n            for (i = 0; i < options.views; i++) {\n                start = currentView.first(current);\n                end = currentView.last(current);\n\n                if (+start < +options.min) {\n                    if (+end >= +options.min) {\n                        ranges.push({ start: new Date(+options.min), end: end });\n                    }\n                    break;\n                }\n\n                ranges.push({ start: start, end: end });\n\n                current = new Date(+shiftDate(start, currentView.name, -1));\n            }\n\n            start = ranges[0].start;\n\n            for (i = 0; i < options.views + 1; i++) {\n                if (!ranges[i]) {\n                    break;\n                }\n\n                if (+start > +ranges[i].start) {\n                    start = ranges[i].start;\n                }\n            }\n\n            return new Date(+start);\n        },\n\n        _canRenderNextView: function(viewDate) {\n            var fullYear = viewDate.getFullYear();\n            var month = viewDate.getMonth();\n            var date = viewDate.getDate();\n            var max = this.options.max;\n            var maxYear = max.getFullYear();\n            var maxMonth = max.getMonth();\n\n\n            if (fullYear < maxYear) {\n                return true;\n            }\n\n            if (fullYear === maxYear && month < maxMonth) {\n                return true;\n            }\n\n            if (fullYear === maxYear && month === maxMonth && date < max.getDate()) {\n                return true;\n            }\n\n            if (fullYear === maxYear && month === maxMonth && date === max.getDate()) {\n                return true;\n            }\n\n            return false;\n        },\n\n        _initViews: function(viewOptions) {\n            var that = this;\n            var options = that.options;\n            var index = calendar.viewsEnum[viewOptions.viewName];\n            var currentView = calendar.views[index];\n            var viewDate;\n\n            that._current = new DATE(+calendar.restrictValue(viewOptions.value, options.min, options.max));\n            that._views = [];\n            that._index = index;\n            viewDate = that._getFirstViewDate(currentView);\n            viewDate.setDate(1);\n\n            that._firstViewValue = new Date(+viewDate);\n\n            for (var i = 0; i < options.views; i++) {\n                viewDate = i ? shiftDate(viewDate, currentView.name, 1) : viewDate;\n                viewDate.setDate(1);\n\n                if (!that._canRenderNextView(viewDate)) {\n                    break;\n                }\n\n                that._table = $(currentView.content($.extend({\n                    min: options.min,\n                    max: options.max,\n                    date: viewDate,\n                    url: options.url,\n                    dates: options.dates,\n                    format: options.format,\n                    culture: options.culture,\n                    disableDates: options.disableDates,\n                    showHeader: options.showViewHeader,\n                    isWeekColumnVisible: options.weekNumber,\n                    otherMonth: options.otherMonth,\n                    messages: options.messages,\n                    contentClasses: \"k-content\"\n                }, that[currentView.name])));\n\n                that._table.appendTo(that.tablesWrapper).addClass(\"k-\" + currentView.name);\n                that._views.push(that._table);\n            }\n\n            that._currentView = currentView;\n\n            that.tablesWrapper.attr(\"class\", \"k-calendar-view k-calendar-\" + currentView.name + \"view k-hstack k-align-items-start k-justify-content-center\");\n\n            that._updateHeader();\n\n            that._aria();\n        },\n\n        _rangeSelection: function(e) {\n            var that = this;\n            var range = e.sender.range();\n            var useEnd = e.sender._useEnd;\n            var useStart = e.sender._useStart;\n            var initialRange = that.selectRange() || {};\n            var start;\n            var end;\n\n            if (range.start) {\n                start = toDateObject(range.start.find(\"a\"));\n            }\n\n            if (range.end) {\n                end = toDateObject(range.end.find(\"a\"));\n            }\n\n            that._range = { start: useStart ? initialRange.start : start, end: useEnd ? initialRange.end : end };\n\n            if (!that._preventChange) {\n                that.trigger(CHANGE);\n            }\n        },\n\n        _selection: function(e) {\n            var that = this;\n            var selectElements = e.sender.value();\n            var domEvent = e.event;\n            var currentTarget = $(domEvent && domEvent.currentTarget);\n            var isCell = currentTarget.is(TD);\n            var currentValue;\n\n            if (that.options.selectable === SINGLE) {\n                that._validateValue(selectElements[0] ? toDateObject(selectElements.first().find(\"a\")) : e.sender._lastActive ? toDateObject(e.sender._lastActive.find(\"a\")) : that.value());\n            }\n\n            if (that.options.selectable == MULTIPLE) {\n\n                if (isCell) {\n                    currentValue = toDateObject(currentTarget.find(\"a\"));\n                }\n\n                if (domEvent && domEvent.ctrlKey) {\n                    if (isCell) {\n                        if (currentTarget.hasClass(SELECTED)) {\n                            that._selectDates.push(currentValue);\n                        } else {\n                            that._deselect(currentValue);\n                        }\n                    } else {\n                        that.element.find(\"table \" + CELLSELECTORVALID).each(function(index, element) {\n                            var value = toDateObject($(element).find(\"a\"));\n                            that._deselect(value);\n                        });\n                        that._addSelectedCellsToArray();\n                    }\n                } else if (domEvent && domEvent.shiftKey) {\n                    that._selectRange(toDateObject(e.sender._lastActive ? e.sender._lastActive.find(\"a\") : selectElements.first().find(\"a\")), currentValue);\n                } else if (isCell) {\n                    that._selectDates = [];\n                    that._selectDates.push(currentValue);\n                } else {\n                    that._selectDates = [];\n                    that._addSelectedCellsToArray();\n                }\n            }\n\n            if (!that._preventChange) {\n                that.trigger(CHANGE);\n            }\n        },\n\n        _addSelectedCellsToArray: function() {\n            var that = this;\n            that.selectable.value().each(function(index, item) {\n                var date = toDateObject($(item.firstChild));\n                if (!that.options.disableDates(date)) {\n                    that._selectDates.push(date);\n                }\n            });\n        },\n\n        _deselect: function(date) {\n            var that = this;\n            var currentDateIndex = that._selectDates.map(Number).indexOf(+date);\n             if (currentDateIndex != -1) {\n                that._selectDates.splice(currentDateIndex, 1);\n            }\n        },\n\n        _unselecting: function(e) {\n            var that = this;\n            var element = e.element;\n\n            if (that.options.selectable === SINGLE && !mobileOS && element.hasClass(FOCUSED)) {\n                e.preventDefault();\n            }\n        },\n\n        _visibleRange: function() {\n            var tables = this.element.find(DOT + CALENDAR_VIEW + EMPTY + TABLE);\n            var firstDateInView = toDateObject(tables.first().find(CELLSELECTOR).first().find(\"a\"));\n            var lastDateInView = toDateObject(tables.last().find(CELLSELECTOR).last().find(\"a\"));\n            return { start: firstDateInView, end: lastDateInView };\n        },\n\n        _dateInViews: function(date) {\n            var that = this;\n            var tables = that.element.find(DOT + CALENDAR_VIEW + EMPTY + TABLE);\n            var firstDateInView = toDateObject(tables.first().find(CELLSELECTOR).first().find(\"a\"));\n            var lastDateInView = toDateObject(tables.last().find(CELLSELECTOR).last().find(\"a\"));\n\n            date = new Date(date.toDateString());\n\n            return +date <= +lastDateInView && +date >= +firstDateInView;\n        },\n\n        _fillRange: function(start, end) {\n            var that = this;\n            var daysDifference;\n\n            that._selectDates = [];\n            daysDifference = daysBetweenTwoDates(start, end);\n            addDaysToArray(that._selectDates, daysDifference, start, that.options.disableDates);\n        },\n\n        _selectRange: function(start, end) {\n            var that = this;\n            var current;\n\n            if (+end < +start) {\n                current = end;\n                end = start;\n                start = current;\n            }\n\n            that._fillRange(start, end);\n            that._visualizeSelectedDatesInView();\n        },\n\n        _header: function() {\n            var that = this;\n            var element = that.element;\n            var buttons;\n            var header = element.find(\".k-calendar-header\");\n\n            if (!header.length) {\n                header = $('<div class=\"k-calendar-header k-hstack\">' +\n                    '<a id=\"calendar-title\" tabindex=\"-1\" href=\"#\" role=\"button\" class=\"k-calendar-title k-title k-button k-button-md k-rounded-md k-button-flat k-button-flat-base\" aria-live=\"polite\"></a>' +\n                    '<span class=\"k-spacer\"></span>' +\n                    '<span class=\"k-calendar-nav k-hstack\">' +\n                        '<a tabindex=\"-1\" href=\"#\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-prev-view\" ' + ARIA_LABEL + '=\"Previous\"><span class=\"k-button-icon k-icon k-i-arrow-60-left\"></span></a>' +\n                        '<a tabindex=\"-1\" href=\"#\" role=\"button\" class=\"k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button k-next-view\" ' + ARIA_LABEL + '=\"Next\"><span class=\"k-button-icon k-icon k-i-arrow-60-right\"></span></a>' +\n                    '</span>' +\n                '</div>').prependTo(element);\n            }\n\n            that.header = header;\n\n            header.on(MOUSEENTER + ns + \" \" + MOUSELEAVE_NS + \" \" + FOCUS + ns + \" \" + BLUR + ns, \".k-button\", mousetoggle)\n                .on(CLICK, function() { return false; })\n                .on(CLICK + ns, \".k-button.k-calendar-title\", that._calendarTitleClick.bind(that))\n                .on(CLICK + ns, \".k-button.k-prev-view\", that._prevViewClick.bind(that))\n                .on(CLICK + ns, \".k-button.k-next-view\", that._nextViewClick.bind(that));\n\n            buttons = header.find(\".k-button\");\n\n            that._title = buttons.filter(\".k-calendar-title\");\n            that._navContainer = header.find(\".k-calendar-nav\");\n            that[PREVARROW] = buttons.filter(\".k-prev-view\");\n            that[NEXTARROW] = buttons.filter(\".k-next-view\");\n        },\n\n        _calendarTitleClick: function() {\n            this.navigateUp();\n            this.focus();\n            this.trigger(NAVIGATE);\n        },\n\n        _prevViewClick: function(e) {\n            e.preventDefault();\n            this.navigateToPast();\n            this.focus();\n            this.trigger(NAVIGATE);\n        },\n\n        _nextViewClick: function(e) {\n            e.preventDefault();\n            this.navigateToFuture();\n            this.focus();\n            this.trigger(NAVIGATE);\n        },\n\n        _wrapper: function() {\n            this.tablesWrapper = $('<div tabindex=\"0\" role=\"grid\" class=\"k-calendar-view\" aria-labelledby=\"calendar-title\" />').insertAfter(this.element[0].firstChild);\n        },\n\n        _templates: function() {\n            var that = this;\n            var options = that.options;\n            var month = options.month;\n            var content = month.content;\n            var weekNumber = month.weekNumber;\n            var empty = month.empty;\n\n            that.month = {\n                content: template('<td class=\"#=data.cssClass#\" role=\"gridcell\"><a tabindex=\"-1\" class=\"k-link#=data.linkClass#\" href=\"#=data.url#\" ' + kendo.attr(VALUE) + '=\"#=data.dateString#\" title=\"#=data.title#\">' + (content || \"#=data.value#\") + '</a></td>', { useWithBlock: !!content }),\n                empty: template('<td role=\"gridcell\"' + (empty ? '>' : ' class=\"k-calendar-td k-out-of-range\">') + (empty || \"<a class='k-link'></a>\") + \"</td>\", { useWithBlock: !!empty }),\n                weekNumber: template('<th class=\"k-calenar-td k-alt\">' + (weekNumber || \"#= data.weekNumber #\") + \"</th>\", { useWithBlock: !!weekNumber })\n            };\n        },\n\n        _footer: function() {\n            var that = this;\n            var options = that.options;\n            var template = options.footer !== false ? kendo.template(that.options.footer || '#= kendo.toString(data,\"D\",\"' + options.culture + '\") #', { useWithBlock: false }) : null;\n            var today = getToday();\n            var element = that.element;\n            var footer = element.find(\".k-footer\");\n\n            if (!template) {\n                that._toggle(false);\n                footer.hide();\n                return;\n            }\n\n            if (!footer[0]) {\n                footer = $('<div class=\"k-footer\"><a tabindex=\"-1\" href=\"#\" class=\"k-link k-nav-today\"></a></div>').appendTo(element);\n            }\n\n            that._today = footer.show()\n                .find(\".k-link\")\n                .html(template(today))\n                .attr(\"title\", kendo.toString(today, \"D\", that.options.culture));\n\n            that._toggle();\n        },\n\n        _navigate: function(arrow, modifier) {\n            var that = this;\n            var index = that._index + 1;\n            var currentValue = new DATE(+that._current);\n            var originaValue = new DATE(+that._current);\n            var offset;\n\n            arrow = that[arrow];\n\n            offset = that._cellByDate(currentValue).closest(TABLE).index();\n\n            if (modifier > 0) {\n                offset = 1 - offset;\n            } else {\n                offset = offset + 1;\n            }\n\n            if (!arrow || !arrow.hasClass(DISABLED)) {\n                if (index > 3) {\n                    currentValue.setFullYear(currentValue.getFullYear() + 100 * (modifier * offset));\n                } else {\n                    calendar.views[index].setDate(currentValue, (modifier * offset));\n                }\n\n                that.navigate(currentValue);\n\n                if (that._dateInViews(originaValue)) {\n                    that._focusCell(that._cellByDate(originaValue));\n                    that._current = originaValue;\n                } else {\n                    if (index > 3) {\n                        originaValue.setFullYear(originaValue.getFullYear() + 100 * modifier);\n                    } else {\n                        calendar.views[index].setDate(originaValue, modifier);\n                    }\n                    that._focusCell(that._cellByDate(originaValue));\n                    that._current = originaValue;\n                }\n            }\n        },\n\n        _toggle: function(toggle) {\n            var that = this;\n            var options = that.options;\n            var isTodayDisabled = options.selectable !== RANGE && that.options.disableDates(getToday());\n            var link = that._today;\n\n            if (toggle === undefined) {\n                toggle = isInRange(getToday(), options.min, options.max);\n            }\n\n            if (link) {\n                link.off(CLICK + ns);\n\n                if (toggle && !isTodayDisabled) {\n                    link.addClass(TODAY)\n                    .removeClass(DISABLED)\n                    .on(CLICK + ns, function(e) { that._todayClick(e); that.focus(); });\n                } else {\n                    link.removeClass(TODAY)\n                    .addClass(DISABLED)\n                    .on(CLICK + ns, function prevent(e) {\n                        e.preventDefault();\n                    });\n                }\n            }\n        },\n\n        _click: function(link) {\n            var that = this;\n            var options = that.options;\n            var currentValue = new Date(+that._current);\n            var value = toDateObject(link);\n\n            kendo.date.adjustDST(value, 0);\n\n            that._currentView.setDate(currentValue, value);\n            that._current = value;\n\n            if (that._currentView.name !== options.depth) {\n                that.navigateDown(calendar.restrictValue(currentValue, options.min, options.max));\n                that._focusCell(that._cellByDate(that._current));\n                that.trigger(NAVIGATE);\n            } else {\n                that._focusCell(link.closest(TD));\n            }\n\n            that.focus();\n        },\n\n        _blur: function() {\n            var that = this;\n\n            if (that._cell) {\n                that._cell.removeClass(FOCUSED);\n            }\n        },\n\n        _focus: function() {\n            var cell = this._cell;\n\n            if (!cell || !$.contains(this.tablesWrapper[0], cell[0])) {\n                if (this._current && this._dateInViews(this._current)) {\n                    cell = this._cellByDate(this._current);\n                } else {\n                    cell = this.tablesWrapper.find(CELLSELECTORVALID).first();\n                }\n            }\n\n            this._focusCell(cell);\n        },\n\n        _focusCell: function(cell) {\n            var that = this;\n            var cellId = that._cellID;\n\n            if (that._cell && that._cell.length) {\n                that._cell[0].removeAttribute(ARIA_LABEL);\n                that._cell.removeClass(FOCUSED);\n                that.tablesWrapper.removeAttr(ARIA_ACTIVEDESCENDANT);\n\n                if (that._cell.attr(ID) === cellId) {\n                    that._cell[0].removeAttribute(ID);\n                }\n            }\n\n            that._cell = cell;\n\n            if (cell.attr(ID)) {\n                that.tablesWrapper.attr(ARIA_ACTIVEDESCENDANT, cell.attr(ID));\n            } else if (cellId) {\n                cell.attr(ID, cellId);\n                that.tablesWrapper.attr(ARIA_ACTIVEDESCENDANT, cellId);\n            }\n\n            cell.addClass(FOCUSED);\n\n            if (cell.length && that._currentView.name == MONTH) {\n                that._current = toDateObject(cell.find(\"a\"));\n            }\n        },\n\n        _todayClick: function(e) {\n            var that = this;\n            var disabled = that.options.disableDates;\n            var today = getToday();\n            var navigate = false;\n\n            e.preventDefault();\n\n            if (disabled(today)) {\n                return;\n            }\n\n            that._value = today;\n\n            if (that.options.selectable === MULTIPLE) {\n                that._selectDates = [today];\n            }\n\n            if (that.options.selectable === RANGE) {\n                that.rangeSelectable.clear(true);\n                that._range = { start: today, end: null };\n            }\n\n            if (that._currentView.name != MONTH || !that._dateInViews(today)) {\n                navigate = true;\n            }\n\n            that.navigate(today, that.options.depth);\n\n            if (that.options.selectable === SINGLE) {\n                that.selectable._lastActive = null;\n            }\n\n            if (navigate) {\n                that.trigger(NAVIGATE);\n            }\n\n            that.trigger(CHANGE);\n        },\n\n        _validateValue: function(value) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var max = options.max;\n\n            value = kendo.parseDate(value, options.format, options.culture);\n\n            if (value !== null) {\n                value = new DATE(+value);\n\n                if (!isInRange(value, min, max)) {\n                    value = null;\n                }\n            }\n\n            if (value === null || !that.options.disableDates(new Date(+value))) {\n                that._value = value;\n            } else if (that._value === undefined) {\n                that._value = null;\n            }\n\n            return that._value;\n        },\n\n        _updateAria: function(ariaTemplate, date) {\n            var that = this;\n            var cell = that._cellByDate(date || that.current());\n            var valueType = that.view().valueType();\n            var current = date || that.current();\n            var text;\n\n            that._focusCell(cell);\n\n            if (valueType === MONTH) {\n                text = kendo.toString(current, \"MMMM\");\n            } else if (valueType === \"date\") {\n                text = kendo.toString(current, \"D\");\n            } else {\n                text = cell.text();\n            }\n\n            cell.attr(ARIA_LABEL, ariaTemplate({ current: current, valueType: valueType, text: text }));\n            return cell.attr(ID);\n        },\n\n        clearSelection: function() {\n            var that = this;\n\n            if (that.selectable) {\n                that.element.find(DOT + SELECTED).removeClass(SELECTED).removeAttr(ARIA_SELECTED);\n            }\n\n            if (that.rangeSelectable) {\n                that.rangeSelectable.clear(true);\n            }\n        },\n\n        _restoreSelection: function() {\n            var that = this;\n            var range;\n            var selectable = that.options.selectable;\n\n            if (that._currentView.name !== that.options.depth) {\n                return;\n            }\n\n            that._preventChange = true;\n\n            if (selectable === RANGE) {\n                range = that.selectRange();\n\n                if (!range || !range.start) {\n                    that._preventChange = false;\n                    return;\n                }\n\n                that.selectRange(range);\n            }\n\n            if (selectable === SINGLE && that.value()) {\n                that.selectable.value(that._cellByDate(that.value()));\n            }\n\n            if (selectable === MULTIPLE) {\n                that._visualizeSelectedDatesInView();\n            }\n\n            that._preventChange = false;\n        },\n\n        value: function(value) {\n            var that = this;\n            var cell;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            value = that._validateValue(value);\n\n            that.clearSelection();\n\n            if (value && !that._dateInViews(value)) {\n                that.navigate(value);\n            }\n\n            if (value !== null && that._currentView.name === MONTH) {\n                cell = that._cellByDate(value);\n\n                if (that.selectable) {\n                    that.selectable.value(cell);\n                }\n\n                if (that.rangeSelectable) {\n                    that.rangeSelectable.start(cell);\n                    that.rangeSelectable._lastActive = cell;\n                }\n            }\n        },\n\n        selectDates: function(dates) {\n            var that = this;\n            var validSelectedDates;\n            var datesUnique;\n\n            if (dates === undefined) {\n                return that._selectDates;\n            }\n\n            datesUnique = dates\n                .map(function(date) { return date.getTime(); })\n                .filter(function(date, position, array) {\n                    return array.indexOf(date) === position;\n                })\n                .map(function(time) { return new Date(time); });\n\n            validSelectedDates = $.grep(datesUnique, function(value) {\n                if (value) {\n                    return +that._validateValue(new Date(value.setHours(0, 0, 0, 0))) === +value;\n                }\n            });\n            that._selectDates = validSelectedDates.length > 0 ? validSelectedDates : (datesUnique.length === 0 ? datesUnique : that._selectDates);\n            that._visualizeSelectedDatesInView();\n        },\n\n        selectRange: function(range) {\n            var that = this;\n            var startInRange;\n            var endInRange;\n            var visibleRange;\n\n            if (range === undefined) {\n                return that._range;\n            }\n\n            that._range = range;\n\n            if (!range.start) {\n                return;\n            }\n\n            visibleRange = that._visibleRange();\n\n            startInRange = that._dateInViews(range.start);\n            endInRange = range.end && that._dateInViews(range.end);\n\n            if (!startInRange && endInRange) {\n                that.rangeSelectable.selectTo(that._cellByDate(range.end));\n            }\n\n            if (startInRange && endInRange) {\n                that.rangeSelectable.range(that._cellByDate(range.start), that._cellByDate(range.end));\n            }\n\n            if (range.end && startInRange && !endInRange) {\n                that.rangeSelectable.selectFrom(that._cellByDate(range.start));\n            }\n\n            if (!range.end && startInRange) {\n                that.rangeSelectable.start(that._cellByDate(range.start));\n            }\n\n            if (+visibleRange.start > +range.start && +visibleRange.end < +range.end) {\n                that.rangeSelectable.mid(that.element.find(CELLSELECTORVALID));\n            }\n        }\n    });\n\n    kendo.ui.plugin(MultiViewCalendar);\n\n    function mousetoggle(e) {\n        var disabled = $(this).hasClass(\"k-disabled\");\n\n        if (!disabled) {\n            $(this).toggleClass(HOVER, MOUSEENTER.indexOf(e.type) > -1 || e.type == FOCUS);\n        }\n    }\n\n    function addDaysToArray(array, numberOfDays, fromDate, disableDates) {\n        for (var i = 0; i <= numberOfDays; i++) {\n            var nextDay = new Date(fromDate.getTime());\n            nextDay = new Date(nextDay.setDate(nextDay.getDate() + i));\n            if (!disableDates(nextDay)) {\n                array.push(nextDay);\n            }\n        }\n    }\n\n    function daysBetweenTwoDates(startDate, endDate) {\n        if (+endDate < +startDate) {\n            var temp = +startDate;\n            calendar.views[0].setDate(startDate, endDate);\n            calendar.views[0].setDate(endDate, new Date(temp));\n        }\n        var fromDateUTC = Date.UTC(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());\n        var endDateUTC = Date.UTC(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());\n\n        return Math.ceil((+endDateUTC - +fromDateUTC) / kendo.date.MS_PER_DAY);\n    }\n\n    function shiftDate(value, dimension, numberOfViews) {\n        var current;\n        if (dimension === MONTH) {\n            current = new DATE(value.getFullYear(), value.getMonth() + numberOfViews, value.getDate());\n            current.setFullYear(value.getFullYear());\n            if (Math.abs(current.getMonth() - value.getMonth()) > numberOfViews || numberOfViews > 10) {\n                current.setMonth(value.getMonth() + numberOfViews);\n                current = calendar.views[0].last(current);\n            }\n            return current;\n        } else if (dimension === \"year\") {\n            current = new DATE(1, value.getMonth(), value.getDate());\n            current.setFullYear(value.getFullYear() + numberOfViews);\n            if (Math.abs(current.getFullYear() - value.getFullYear()) > numberOfViews) {\n                current = new DATE(1, value.getMonth(), 1);\n                current.setFullYear(value.getFullYear() + numberOfViews);\n                current = calendar.views[1].last(current);\n            }\n            return current;\n        } else if (dimension === \"decade\") {\n            current = new DATE(1, value.getMonth(), value.getDate());\n            current.setFullYear(value.getFullYear() + 10 * numberOfViews);\n            if (Math.abs(current.getFullYear() - value.getFullYear()) > 10 * numberOfViews) {\n                current = new DATE(1, value.getMonth(), 1);\n                current.setFullYear(value.getFullYear() + 10 * numberOfViews);\n                current = calendar.views[2].last(current);\n            }\n            return current;\n        } else if (dimension === \"century\") {\n            current = new DATE(1, value.getMonth(), value.getDate());\n            current.setFullYear(value.getFullYear() + 100 * numberOfViews);\n            if (Math.abs(current.getFullYear() - value.getFullYear()) > 100 * numberOfViews) {\n                current = new DATE(1, value.getMonth(), 1);\n                current.setFullYear(value.getFullYear() + 100 * numberOfViews);\n                current = calendar.views[3].last(current);\n            }\n            return current;\n        }\n    }\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","calendar","support","isInRange","toDateObject","createDate","isEqualDate","getToday","keys","ui","Widget","Selectable","template","mobileOS","ns","CLICK","KEYDOWN","ID","MIN","MONTH","DOT","EMPTY","CENTURY","DECADE","CHANGE","NAVIGATE","VALUE","FOCUSED","SELECTED","MID","SPLITEND","SPLITSTART","START","END","HOVER","DISABLED","TODAY","OTHERMONTH","OUTOFRANGE","CALENDAR_VIEW","CELLSELECTOR","CELLSELECTORVALID","BLUR","FOCUS","MOUSEENTER","touch","MOUSELEAVE_NS","PREVARROW","NEXTARROW","RANGE","SINGLE","MULTIPLE","TABINDEX","TABLE","TBODY","THEAD","TR","TD","TH","ROLE","NONE","ROWGROUP","COLUMNHEADER","ROWHEADER","GRIDCELL","ARIA_SELECTED","ARIA_DISABLED","ARIA_LABEL","ARIA_OWNS","ARIA_ACTIVEDESCENDANT","INPUTSELECTOR","DATE","Date","views","month","year","decade","century","RangeSelectable","extend","init","element","options","that","this","fn","call","userEvents","UserEvents","global","allowSelection","filter","tap","_tap","bind","touchAction","events","inputSelectors","multiple","dragToSelect","relatedTarget","noop","destroy","_lastActive","_start","_end","_allowSelection","target","is","cancel","start","addClass","attr","end","mid","elements","tables","find","each","lastCell","last","firstCell","first","hasClass","clear","clearVariables","removeClass","removeAttr","selectFrom","items","startIdx","inArray","index","selectTo","endIdx","range","temp","length","_useEnd","change","trigger","_clearFlags","_useStart","e","selectRange","currentDate","_toggling","MultiViewCalendar","culture","wrapper","disableDates","disabled","getCulture","format","_extractFormat","calendars","standard","patterns","d","_templates","_header","_wrapper","weekNumber","on","_move","_focus","_blur","link","currentTarget","firstChild","href","indexOf","preventDefault","_click","_mouseEnter","guid","_cellID","_calendarWidth","width","_range","_initViews","viewName","value","_selectable","_footer","footer","_selectDates","selectable","selectDates","_restoreSelection","notify","min","max","dates","showViewHeader","depth","messages","weekColumnHeader","setOptions","normalize","i","_views","off","remove","_cell","_currentView","_current","header","_title","rangeSelectable","_today","current","focus","tablesWrapper","_option","view","navigateToPast","_navigate","navigateToFuture","navigateUp","_index","navigate","navigateDown","_value","isNaN","viewsEnum","restrictValue","_aria","rowGroups","add","role","_ariaMonth","rows","noHeaderRows","not","noHeaderCells","columnHeaderCells","rowHeaderCells","outOfRange","ariaDataCells","row","$row","numberOfEmpty","owned","prev","cells","children","aria-hidden","eq","j","cell","$cell","push","join","_updateHeader","title","_firstViewValue","visibleRange","_visibleRange","lastDate","prevDisabled","nextDisabled","shiftDate","html","getFullYear","toggleClass","compare","_navContainer","appendTo","_dateInViews","key","keyCode","focusedCell","table","closest","currentValue","isRtl","prevent","method","lastActive","cellIndex","RIGHT","LEFT","UP","DOWN","SPACEBAR","HOME","_focusCell","next","_todayClick","ctrlKey","metaKey","_cellByDate","ENTER","_toggleSelection","shiftKey","setDate","_nextNavigatable","getMonth","getDate","_selectRange","PAGEUP","PAGEDOWN","_visualizeSelectedDatesInView","selectedDates","toDateString","_selectElement","isDisabled","navigatableDate","getTime","event","_unselect","option","isBigger","parseDate","_toggle","toLowerCase","_rangeSelection","aria","parseOptions","_selection","_onRelatedTarget","unselect","_unselecting","_getFirstViewDate","currentView","ranges","_canRenderNextView","viewDate","fullYear","date","maxYear","maxMonth","viewOptions","_table","content","url","showHeader","isWeekColumnVisible","otherMonth","contentClasses","sender","useEnd","useStart","initialRange","_preventChange","selectElements","domEvent","isCell","_validateValue","_deselect","_addSelectedCellsToArray","item","currentDateIndex","map","Number","splice","firstDateInView","lastDateInView","_fillRange","daysDifference","daysBetweenTwoDates","addDaysToArray","buttons","prependTo","mousetoggle","_calendarTitleClick","_prevViewClick","_nextViewClick","insertAfter","empty","useWithBlock","today","hide","show","toString","arrow","modifier","originaValue","offset","setFullYear","toggle","isTodayDisabled","adjustDST","contains","cellId","removeAttribute","_updateAria","ariaTemplate","valueType","text","clearSelection","validSelectedDates","datesUnique","position","array","time","grep","setHours","startInRange","endInRange","type","numberOfDays","fromDate","nextDay","startDate","endDate","fromDateUTC","UTC","endDateUTC","Math","ceil","MS_PER_DAY","dimension","numberOfViews","abs","setMonth","plugin","amd","a1","a2","a3"],"mappings":"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"}